<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Flight Log</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <link rel="stylesheet" href="styles.css" />
</head>
<body>
  <div class="app">
    <header class="app-header">
      <div class="app-icon">âœˆï¸Ž</div>
      <div class="app-title-block">
        <div class="app-title">Flight Log</div>
        <div class="app-subtitle">
          Save routes, passengers & PNRs in a clean personal log.
        </div>
      </div>
    </header>

    <main class="layout">
      <!-- LEFT: input + last route -->
      <section class="card">
        <div class="card-header">
          <div class="card-title">New flight</div>
          <div class="card-note">Enter details and add to your log</div>
        </div>

        <form id="flight-form">
          <div class="field-group">
            <div class="field">
              <label for="flight-number">Flight Number</label>
              <input
                id="flight-number"
                type="text"
                placeholder="LH438"
                autocomplete="off"
                required
              />
              <div id="flight-error" class="field-error" aria-live="polite"></div>
            </div>

            <div class="field">
              <label for="flight-date">Flight Date</label>
              <input
                id="flight-date"
                type="date"
                required
              />
              <div id="flight-date-error" class="field-error" aria-live="polite"></div>
            </div>
          </div>

          <div class="field-group">
            <div class="field">
              <label for="pax-existing">Passenger(s)</label>
              <select id="pax-existing" multiple></select>
              <small>Use âŒ˜ / Ctrl / Shift to select multiple, or leave empty.</small>
            </div>

            <div class="field">
              <label for="pax-new">Add New Passenger</label>
              <input
                id="pax-new"
                type="text"
                placeholder="John Doe, Jane Doe"
                autocomplete="off"
              />
              <small>Comma-separated. New names become selectable next time.</small>
            </div>
          </div>

          <div id="pax-error" class="field-error" aria-live="polite"></div>

          <div class="field-group">
            <div class="field">
              <label for="pnr">PNR Code</label>
              <input
                id="pnr"
                type="text"
                maxlength="6"
                placeholder="ABC123"
                autocomplete="off"
              />
              <small>Optional. 6-character booking code.</small>
            </div>
          </div>

          <div class="button-row">
            <button type="submit" class="btn btn-primary" disabled>
              <span class="btn-icon">âž•</span>
              <span>Get Route & Save</span>
            </button>
          </div>
        </form>

        <div class="secondary-card">
          <div class="json-label-row">
            <div class="json-title">Last Fetched Route</div>
            <span class="badge">Live preview</span>
          </div>
          <pre id="output" class="json-block">{}</pre>
        </div>
      </section>

      <!-- RIGHT: stored JSON + actions -->
      <section class="card">
        <div class="card-header">
          <div class="card-title">Your log</div>
          <div class="card-note">Stored privately in this browser</div>
        </div>

        <!-- API key status -->
        <div class="api-status-row">
          <span id="api-key-status" class="api-status-text">
            Checking API keyâ€¦
          </span>
        </div>

        <div class="button-row button-row-top">
          <button id="import-json" class="btn btn-ghost">
            <span class="btn-icon">â¬†ï¸Ž</span>
            <span>Import JSON</span>
          </button>
          <button id="download-json" class="btn btn-ghost">
            <span class="btn-icon">â¬‡ï¸Ž</span>
            <span>Download JSON</span>
          </button>
          <button id="clear-json" class="btn btn-ghost">
            <span class="btn-icon">ðŸ—‘</span>
            <span>Clear All</span>
          </button>
        </div>

        <!-- Hidden file input for import -->
        <input
          id="import-json-file"
          type="file"
          accept="application/json"
          style="display:none;"
        />

        <div class="json-label-row">
          <div class="json-title">Saved Flights</div>
        </div>
        <pre id="saved-json" class="json-block">[]</pre>
      </section>
    </main>
  </div>

  <script src="script.js"></script>
</body>
</html>
