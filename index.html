<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Flight Log</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <link rel="stylesheet" href="styles.css" />
</head>
<body>
  <div class="app">
    <header class="app-header">
      <div class="app-icon">‚úàÔ∏é</div>
      <div class="app-title-block">
        <div class="app-title">Flight Log</div>
        <div class="app-subtitle">
          Save routes, trips, passengers & PNRs in a clean personal log.
        </div>
      </div>
    </header>

    <main class="layout">
      <!-- TOP: Trip selection & overview -->
      <section class="card card-trip">
        <div class="card-header">
          <div class="card-title">Trip</div>
          <div class="card-note">Step 1 ‚Äì choose or create a trip</div>
        </div>

        <!-- Trip selection / creation controls -->
        <div class="field-group">
          <div class="field">
            <label for="trip-existing">Existing Trip</label>
            <select id="trip-existing"></select>
            <small>Select an existing trip, or leave on ‚ÄúNew trip‚Äù and name one below.</small>
          </div>

          <div class="field">
            <label for="trip-new-name">New Trip Name</label>
            <input
              id="trip-new-name"
              type="text"
              placeholder="Summer 2026 in Greece"
              autocomplete="off"
            />
            <small>If filled, a new trip will be created.</small>
          </div>
        </div>

        <div id="trip-error" class="field-error" aria-live="polite"></div>

        <!-- API key + data actions -->
        <div class="trip-actions-row">
          <div class="api-status-row">
            <span id="api-key-status" class="api-status-text">
              Checking API key‚Ä¶
            </span>
          </div>

          <div class="button-row trip-button-row">
            <button id="import-json" class="btn btn-ghost">
              <span class="btn-icon">‚¨ÜÔ∏é</span>
              <span>Import JSON</span>
            </button>
            <button id="download-json" class="btn btn-ghost">
              <span class="btn-icon">‚¨áÔ∏é</span>
              <span>Download JSON</span>
            </button>
            <button id="clear-json" class="btn btn-ghost">
              <span class="btn-icon">üóë</span>
              <span>Clear All</span>
            </button>
          </div>
        </div>

        <!-- Hidden file input for import -->
        <input
          id="import-json-file"
          type="file"
          accept="application/json"
          style="display:none;"
        />

        <!-- Flights in selected trip (tiles) -->
        <div class="tiles-section">
          <div class="tiles-header-row">
            <div class="tiles-title">Flights in this trip</div>
            <span id="trip-flights-summary" class="tag-soft">
              No trip selected
            </span>
          </div>
          <div id="trip-flights-list" class="tiles-grid">
            <div class="tiles-empty">
              Select an existing trip or create a new one to see its flights here.
            </div>
          </div>
        </div>

        <!-- Raw JSON view of all trips -->
        <div class="secondary-card secondary-card-json">
          <div class="json-label-row">
            <div class="json-title">All Trips (raw JSON)</div>
          </div>
          <pre id="saved-json" class="json-block">[]</pre>
        </div>
      </section>

      <!-- BOTTOM: Flight entry -->
      <section class="card card-flight">
        <div class="card-header">
          <div class="card-title">New flight</div>
          <div class="card-note">Step 2 ‚Äì add a flight to the selected trip</div>
        </div>

        <form id="flight-form">
          <!-- Flight info -->
          <div class="field-group">
            <div class="field">
              <label for="flight-number">Flight Number</label>
              <input
                id="flight-number"
                type="text"
                placeholder="LH438"
                autocomplete="off"
                required
              />
              <div id="flight-error" class="field-error" aria-live="polite"></div>
            </div>

            <div class="field">
              <label for="flight-date">Flight Date</label>
              <input
                id="flight-date"
                type="date"
                required
              />
              <div id="flight-date-error" class="field-error" aria-live="polite"></div>
            </div>
          </div>

          <!-- Passengers -->
          <div class="field-group">
            <div class="field">
              <label for="pax-existing">Passenger(s)</label>
              <select id="pax-existing" multiple></select>
              <small>Use ‚åò / Ctrl / Shift to select multiple, or leave empty.</small>
            </div>

            <div class="field">
              <label for="pax-new">Add New Passenger</label>
              <input
                id="pax-new"
                type="text"
                placeholder="John Doe, Jane Doe"
                autocomplete="off"
              />
              <small>Comma-separated. New names become selectable next time.</small>
            </div>
          </div>

          <div id="pax-error" class="field-error" aria-live="polite"></div>

          <!-- PNR -->
          <div class="field-group">
            <div class="field">
              <label for="pnr">PNR Code</label>
              <input
                id="pnr"
                type="text"
                maxlength="6"
                placeholder="ABC123"
                autocomplete="off"
              />
              <small>Optional. 6-character booking code.</small>
            </div>
          </div>

          <!-- Submit -->
          <div class="button-row">
            <button type="submit" class="btn btn-primary" disabled>
              <span class="btn-icon">‚ûï</span>
              <span>Get Route &amp; Save</span>
            </button>
          </div>
        </form>

        <!-- Last fetched route -->
        <div class="secondary-card">
          <div class="json-label-row">
            <div class="json-title">Last Fetched Route</div>
            <span class="badge">Live preview</span>
          </div>
          <pre id="output" class="json-block">{}</pre>
        </div>
      </section>
    </main>
  </div>

  <script src="script.js"></script>
</body>
</html>
